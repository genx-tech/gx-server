{"version":3,"file":"middleware.js","names":["UnexpectedState","require","middleware","middlewares","target","name","descriptor","targetFunction","isHof","arguments","length","value","enumerable","__metaMiddlewares","module","exports"],"sources":["../../src/utils/middleware.js"],"sourcesContent":["const { UnexpectedState } = require(\"@genx/error\");\n\nfunction middleware(...middlewares) {\n    return function (target, name, descriptor) {\n        let targetFunction,\n            isHof = false;\n\n        if (arguments.length === 1 && typeof target === \"function\") {\n            targetFunction = target;\n            isHof = true;\n        } else if (descriptor && descriptor.value) {\n            targetFunction = descriptor.value;\n            descriptor.enumerable = true;\n        } else {\n            throw new UnexpectedState(\"Invalid usage of middleware decorator.\");\n        }\n\n        if (middlewares.length > 0) {\n            targetFunction.__metaMiddlewares = middlewares;\n        }\n\n        return isHof ? targetFunction : descriptor;\n    };\n}\n\nmodule.exports = middleware;\n"],"mappings":";;;;AAAA,MAAM;EAAEA;AAAF,IAAsBC,OAAO,CAAC,aAAD,CAAnC;;AAEA,SAASC,UAAT,CAAoB,GAAGC,WAAvB,EAAoC;EAChC,OAAO,UAAUC,MAAV,EAAkBC,IAAlB,EAAwBC,UAAxB,EAAoC;IACvC,IAAIC,cAAJ;IAAA,IACIC,KAAK,GAAG,KADZ;;IAGA,IAAIC,SAAS,CAACC,MAAV,KAAqB,CAArB,IAA0B,OAAON,MAAP,KAAkB,UAAhD,EAA4D;MACxDG,cAAc,GAAGH,MAAjB;MACAI,KAAK,GAAG,IAAR;IACH,CAHD,MAGO,IAAIF,UAAU,IAAIA,UAAU,CAACK,KAA7B,EAAoC;MACvCJ,cAAc,GAAGD,UAAU,CAACK,KAA5B;MACAL,UAAU,CAACM,UAAX,GAAwB,IAAxB;IACH,CAHM,MAGA;MACH,MAAM,IAAIZ,eAAJ,CAAoB,wCAApB,CAAN;IACH;;IAED,IAAIG,WAAW,CAACO,MAAZ,GAAqB,CAAzB,EAA4B;MACxBH,cAAc,CAACM,iBAAf,GAAmCV,WAAnC;IACH;;IAED,OAAOK,KAAK,GAAGD,cAAH,GAAoBD,UAAhC;EACH,CAnBD;AAoBH;;AAEDQ,MAAM,CAACC,OAAP,GAAiBb,UAAjB"}