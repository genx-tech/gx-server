{"version":3,"file":"templatedError.js","names":["require","path","Literal","InvalidConfiguration","koaError","module","exports","options","app","template","engine","resolve","backendPath","VIEWS_PATH"],"sources":["../../src/middlewares/templatedError.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Error response middleware with template engines\n * @module Middleware_TemplatedError\n */\n\nconst path = require('path');\nconst Literal = require('../enum/Literal');\nconst { InvalidConfiguration } = require('@genx/error');\n\n/**\n * @function\n * @param {Object} options - Template options\n * @property {string} options.template - Path to template written with your template engine\n * @property {string} options.engine - Path to template written with your template engine\n * @property {bool} options.cache - Path to template written with your template engine, default: NODE_ENV != 'development'\n * @property {string} [options.env='development'] - Path to template written with your template engine\n * @property {Array.<string>} options.accepts - Mimetypes passed to ctx.accepts, default: [ 'html', 'text', 'json' ]\n **/\nconst koaError = require('koa-error');\n\nmodule.exports = (options, app) => {\n    if (!options.template) {        \n        if (options.engine && options.engine !== 'swig') {\n            throw new InvalidConfiguration(\n                'Missing template option.',\n                app,\n                'middlewares.templatedError.template'\n            );        \n        }\n\n        options.template = 'defaultError.swig';\n    }\n\n    options.template = path.resolve(app.backendPath, Literal.VIEWS_PATH, options.template); \n\n    if (!options.engine) {\n        options.engine = 'swig';\n    }\n\n    return koaError(options);\n} "],"mappings":"AAAA,YAAY;AAACA,OAAA;AAOb,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,OAAO,GAAGF,OAAO,CAAC,iBAAiB,CAAC;AAC1C,MAAM;EAAEG;AAAqB,CAAC,GAAGH,OAAO,CAAC,aAAa,CAAC;AAWvD,MAAMI,QAAQ,GAAGJ,OAAO,CAAC,WAAW,CAAC;AAErCK,MAAM,CAACC,OAAO,GAAG,CAACC,OAAO,EAAEC,GAAG,KAAK;EAC/B,IAAI,CAACD,OAAO,CAACE,QAAQ,EAAE;IACnB,IAAIF,OAAO,CAACG,MAAM,IAAIH,OAAO,CAACG,MAAM,KAAK,MAAM,EAAE;MAC7C,MAAM,IAAIP,oBAAoB,CAC1B,0BAA0B,EAC1BK,GAAG,EACH,qCACJ,CAAC;IACL;IAEAD,OAAO,CAACE,QAAQ,GAAG,mBAAmB;EAC1C;EAEAF,OAAO,CAACE,QAAQ,GAAGR,IAAI,CAACU,OAAO,CAACH,GAAG,CAACI,WAAW,EAAEV,OAAO,CAACW,UAAU,EAAEN,OAAO,CAACE,QAAQ,CAAC;EAEtF,IAAI,CAACF,OAAO,CAACG,MAAM,EAAE;IACjBH,OAAO,CAACG,MAAM,GAAG,MAAM;EAC3B;EAEA,OAAON,QAAQ,CAACG,OAAO,CAAC;AAC5B,CAAC"}