{"version":3,"file":"Helpers.js","names":["require","_","InvalidConfiguration","Literal","httpMethod","middleware","exports","Controller","requireFeatures","features","app","hasNotEnabled","find","castArray","feature","enabled","hasMethod","obj","name","desc","Object","getOwnPropertyDescriptor","has","value","proto","getPrototypeOf","prototype","defaultBackendPath","process","env","NODE_RT","BACKEND_SRC_PATH","BACKEND_PATH"],"sources":["../../src/utils/Helpers.js"],"sourcesContent":["\"use strict\";\n\nconst { _ } = require('@genx/july');\nconst { InvalidConfiguration } = require('@genx/error');\nconst Literal = require('../enum/Literal');\nconst httpMethod = require('./httpMethod');\nconst middleware = require('./middleware');\n\nexports.Controller = require('./Controller');\n\nexports.requireFeatures = function (features, app, middleware) {\n    let hasNotEnabled = _.find(_.castArray(features), feature => !app.enabled(feature));\n\n    if (hasNotEnabled) {\n        throw new InvalidConfiguration(\n            `Middleware \"${middleware}\" requires \"${hasNotEnabled}\" feature to be enabled.`,\n            app,\n            `middlewares.${middleware}`\n        );\n    }\n};\n\n/**\n * Http method decorator for module controller\n */\nexports.httpMethod = httpMethod;\n\n/**\n * Middleware decorator for controller\n */\n exports.middleware = middleware;\n\nexports.hasMethod = function hasMethod(obj, name) {\n    const desc = Object.getOwnPropertyDescriptor(obj, name);    \n    let has = !!desc && typeof desc.value === 'function';\n    if (has) return true;\n\n    let proto = Object.getPrototypeOf(obj);\n    if (proto === Object.prototype) return has;\n\n    return hasMethod(proto, name);\n};\n\n/**\n * when running with [NODE_RT=babel], directly use source files\n */\nexports.defaultBackendPath = (process.env.NODE_RT && process.env.NODE_RT === 'babel') ? Literal.BACKEND_SRC_PATH : Literal.BACKEND_PATH;"],"mappings":"AAAA,YAAY;;AAACA,OAAA;AAEb,MAAM;EAAEC;AAAE,CAAC,GAAGD,OAAO,CAAC,YAAY,CAAC;AACnC,MAAM;EAAEE;AAAqB,CAAC,GAAGF,OAAO,CAAC,aAAa,CAAC;AACvD,MAAMG,OAAO,GAAGH,OAAO,CAAC,iBAAiB,CAAC;AAC1C,MAAMI,UAAU,GAAGJ,OAAO,CAAC,cAAc,CAAC;AAC1C,MAAMK,UAAU,GAAGL,OAAO,CAAC,cAAc,CAAC;AAE1CM,OAAO,CAACC,UAAU,GAAGP,OAAO,CAAC,cAAc,CAAC;AAE5CM,OAAO,CAACE,eAAe,GAAG,UAAUC,QAAQ,EAAEC,GAAG,EAAEL,UAAU,EAAE;EAC3D,IAAIM,aAAa,GAAGV,CAAC,CAACW,IAAI,CAACX,CAAC,CAACY,SAAS,CAACJ,QAAQ,CAAC,EAAEK,OAAO,IAAI,CAACJ,GAAG,CAACK,OAAO,CAACD,OAAO,CAAC,CAAC;EAEnF,IAAIH,aAAa,EAAE;IACf,MAAM,IAAIT,oBAAoB,CACzB,eAAcG,UAAW,eAAcM,aAAc,0BAAyB,EAC/ED,GAAG,EACF,eAAcL,UAAW,EAC9B,CAAC;EACL;AACJ,CAAC;AAKDC,OAAO,CAACF,UAAU,GAAGA,UAAU;AAK9BE,OAAO,CAACD,UAAU,GAAGA,UAAU;AAEhCC,OAAO,CAACU,SAAS,GAAG,SAASA,SAASA,CAACC,GAAG,EAAEC,IAAI,EAAE;EAC9C,MAAMC,IAAI,GAAGC,MAAM,CAACC,wBAAwB,CAACJ,GAAG,EAAEC,IAAI,CAAC;EACvD,IAAII,GAAG,GAAG,CAAC,CAACH,IAAI,IAAI,OAAOA,IAAI,CAACI,KAAK,KAAK,UAAU;EACpD,IAAID,GAAG,EAAE,OAAO,IAAI;EAEpB,IAAIE,KAAK,GAAGJ,MAAM,CAACK,cAAc,CAACR,GAAG,CAAC;EACtC,IAAIO,KAAK,KAAKJ,MAAM,CAACM,SAAS,EAAE,OAAOJ,GAAG;EAE1C,OAAON,SAAS,CAACQ,KAAK,EAAEN,IAAI,CAAC;AACjC,CAAC;AAKDZ,OAAO,CAACqB,kBAAkB,GAAIC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAIF,OAAO,CAACC,GAAG,CAACC,OAAO,KAAK,OAAO,GAAI3B,OAAO,CAAC4B,gBAAgB,GAAG5B,OAAO,CAAC6B,YAAY"}