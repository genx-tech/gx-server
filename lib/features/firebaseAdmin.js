"use strict";const{Feature}=require("..").Enums;const{tryRequire}=require("@genx/app/lib/utils/Helpers");const{InvalidConfiguration}=require("@genx/error");const{fs}=require("rk-utils");module.exports={type:Feature.SERVICE,load_:async function(app,options){if(!options||typeof options.serviceAccount!=="string"){throw new InvalidConfiguration("Missing required configuration item \"firebase.serviceAccount\".")}const admin=tryRequire("firebase-admin");const serviceAccount=await fs.readJson(options.serviceAccount,"utf8");const firebaseAdminApp=admin.initializeApp({credential:admin.credential.cert(serviceAccount)});app.registerService("firebaseAdmin",firebaseAdminApp)}};