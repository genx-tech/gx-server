{"version":3,"file":"WebModule.js","names":["require","path","_","text","ServiceContainer","ModuleBase","Routable","Literal","WebModule","constructor","server","name","route","appPath","options","ensureStartsWith","dropIfEndsWith","requireFromApp","appName","relativePath","_getFeatureFallbackPath","pathArray","splice","resolve","__dirname","APP_FEATURES_PATH","module","exports"],"sources":["../src/WebModule.js"],"sourcesContent":["\"use strict\";\n\nconst path = require('path');\nconst { _, text } = require('@genx/july');\nconst { ServiceContainer } = require('@genx/app');\nconst ModuleBase = require('./ModuleBase');\nconst Routable = require('./Routable');\nconst Literal = require('./enum/Literal');\n\n/**\n * Web application module class.\n * @class\n * @extends Routable(LibModule)\n */\nclass WebModule extends ModuleBase(Routable(ServiceContainer)) {\n    /**     \n     * @param {WebServer} server\n     * @param {string} name - The name of the app module.\n     * @param {string} route - The base route of the app module.\n     * @param {string} appPath - The path to load the app's module files\n     * @param {object} [options] - The app module's extra options defined in its parent's configuration.          \n     * @property {bool} [options.logWithAppName=false] - Flag to include app name in log message.\n     */\n    constructor(server, name, route, appPath, options) {    \n        super(server, name, appPath, options);\n\n        /**\n         * Mounting route.\n         * @member {string}\n         */\n        this.route = text.ensureStartsWith(text.dropIfEndsWith(route, '/'), '/');               \n    }  \n\n    /**\n     * Require a module from the source path of an app module\n     * @param {*} relativePath \n     */\n    requireFromApp(appName, relativePath) {\n        return this.server.requireFromApp(appName, relativePath);\n    }\n\n    _getFeatureFallbackPath() {\n        let pathArray = super._getFeatureFallbackPath();\n        pathArray.splice(2, 0, path.resolve(__dirname, Literal.APP_FEATURES_PATH));\n        return pathArray;\n    }\n}\n\nmodule.exports = WebModule;"],"mappings":"AAAA,YAAY;;AAACA,OAAA;AAEb,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAM;EAAEE,CAAC;EAAEC;AAAK,CAAC,GAAGH,OAAO,CAAC,YAAY,CAAC;AACzC,MAAM;EAAEI;AAAiB,CAAC,GAAGJ,OAAO,CAAC,WAAW,CAAC;AACjD,MAAMK,UAAU,GAAGL,OAAO,CAAC,cAAc,CAAC;AAC1C,MAAMM,QAAQ,GAAGN,OAAO,CAAC,YAAY,CAAC;AACtC,MAAMO,OAAO,GAAGP,OAAO,CAAC,gBAAgB,CAAC;AAOzC,MAAMQ,SAAS,SAASH,UAAU,CAACC,QAAQ,CAACF,gBAAgB,CAAC,CAAC,CAAC;EAS3DK,WAAWA,CAACC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAEC,OAAO,EAAE;IAC/C,KAAK,CAACJ,MAAM,EAAEC,IAAI,EAAEE,OAAO,EAAEC,OAAO,CAAC;IAMrC,IAAI,CAACF,KAAK,GAAGT,IAAI,CAACY,gBAAgB,CAACZ,IAAI,CAACa,cAAc,CAACJ,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC;EAC5E;EAMAK,cAAcA,CAACC,OAAO,EAAEC,YAAY,EAAE;IAClC,OAAO,IAAI,CAACT,MAAM,CAACO,cAAc,CAACC,OAAO,EAAEC,YAAY,CAAC;EAC5D;EAEAC,uBAAuBA,CAAA,EAAG;IACtB,IAAIC,SAAS,GAAG,KAAK,CAACD,uBAAuB,CAAC,CAAC;IAC/CC,SAAS,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAErB,IAAI,CAACsB,OAAO,CAACC,SAAS,EAAEjB,OAAO,CAACkB,iBAAiB,CAAC,CAAC;IAC1E,OAAOJ,SAAS;EACpB;AACJ;AAEAK,MAAM,CAACC,OAAO,GAAGnB,SAAS"}