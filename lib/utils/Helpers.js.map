{"version":3,"file":"Helpers.js","names":["_","require","InvalidConfiguration","Literal","httpMethod","middleware","exports","Controller","requireFeatures","features","app","hasNotEnabled","find","castArray","feature","enabled","hasMethod","obj","name","desc","Object","getOwnPropertyDescriptor","has","value","proto","getPrototypeOf","prototype","defaultBackendPath","process","env","NODE_RT","BACKEND_SRC_PATH","BACKEND_PATH"],"sources":["../../src/utils/Helpers.js"],"sourcesContent":["\"use strict\";\n\nconst { _ } = require('@genx/july');\nconst { InvalidConfiguration } = require('@genx/error');\nconst Literal = require('../enum/Literal');\nconst httpMethod = require('./httpMethod');\nconst middleware = require('./middleware');\n\nexports.Controller = require('./Controller');\n\nexports.requireFeatures = function (features, app, middleware) {\n    let hasNotEnabled = _.find(_.castArray(features), feature => !app.enabled(feature));\n\n    if (hasNotEnabled) {\n        throw new InvalidConfiguration(\n            `Middleware \"${middleware}\" requires \"${hasNotEnabled}\" feature to be enabled.`,\n            app,\n            `middlewares.${middleware}`\n        );\n    }\n};\n\n/**\n * Http method decorator for module controller\n */\nexports.httpMethod = httpMethod;\n\n/**\n * Middleware decorator for controller\n */\n exports.middleware = middleware;\n\nexports.hasMethod = function hasMethod(obj, name) {\n    const desc = Object.getOwnPropertyDescriptor(obj, name);    \n    let has = !!desc && typeof desc.value === 'function';\n    if (has) return true;\n\n    let proto = Object.getPrototypeOf(obj);\n    if (proto === Object.prototype) return has;\n\n    return hasMethod(proto, name);\n};\n\n/**\n * when running with [NODE_RT=babel], directly use source files\n */\nexports.defaultBackendPath = (process.env.NODE_RT && process.env.NODE_RT === 'babel') ? Literal.BACKEND_SRC_PATH : Literal.BACKEND_PATH;"],"mappings":"AAAA;;;;AAEA,MAAM;EAAEA;AAAF,IAAQC,OAAO,CAAC,YAAD,CAArB;;AACA,MAAM;EAAEC;AAAF,IAA2BD,OAAO,CAAC,aAAD,CAAxC;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,cAAD,CAA1B;;AACA,MAAMI,UAAU,GAAGJ,OAAO,CAAC,cAAD,CAA1B;;AAEAK,OAAO,CAACC,UAAR,GAAqBN,OAAO,CAAC,cAAD,CAA5B;;AAEAK,OAAO,CAACE,eAAR,GAA0B,UAAUC,QAAV,EAAoBC,GAApB,EAAyBL,UAAzB,EAAqC;EAC3D,IAAIM,aAAa,GAAGX,CAAC,CAACY,IAAF,CAAOZ,CAAC,CAACa,SAAF,CAAYJ,QAAZ,CAAP,EAA8BK,OAAO,IAAI,CAACJ,GAAG,CAACK,OAAJ,CAAYD,OAAZ,CAA1C,CAApB;;EAEA,IAAIH,aAAJ,EAAmB;IACf,MAAM,IAAIT,oBAAJ,CACD,eAAcG,UAAW,eAAcM,aAAc,0BADpD,EAEFD,GAFE,EAGD,eAAcL,UAAW,EAHxB,CAAN;EAKH;AACJ,CAVD;;AAeAC,OAAO,CAACF,UAAR,GAAqBA,UAArB;AAKCE,OAAO,CAACD,UAAR,GAAqBA,UAArB;;AAEDC,OAAO,CAACU,SAAR,GAAoB,SAASA,SAAT,CAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;EAC9C,MAAMC,IAAI,GAAGC,MAAM,CAACC,wBAAP,CAAgCJ,GAAhC,EAAqCC,IAArC,CAAb;EACA,IAAII,GAAG,GAAG,CAAC,CAACH,IAAF,IAAU,OAAOA,IAAI,CAACI,KAAZ,KAAsB,UAA1C;EACA,IAAID,GAAJ,EAAS,OAAO,IAAP;EAET,IAAIE,KAAK,GAAGJ,MAAM,CAACK,cAAP,CAAsBR,GAAtB,CAAZ;EACA,IAAIO,KAAK,KAAKJ,MAAM,CAACM,SAArB,EAAgC,OAAOJ,GAAP;EAEhC,OAAON,SAAS,CAACQ,KAAD,EAAQN,IAAR,CAAhB;AACH,CATD;;AAcAZ,OAAO,CAACqB,kBAAR,GAA8BC,OAAO,CAACC,GAAR,CAAYC,OAAZ,IAAuBF,OAAO,CAACC,GAAR,CAAYC,OAAZ,KAAwB,OAAhD,GAA2D3B,OAAO,CAAC4B,gBAAnE,GAAsF5B,OAAO,CAAC6B,YAA3H"}