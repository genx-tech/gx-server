{"version":3,"sources":["../../src/utils/Helpers.js"],"names":["_","require","InvalidConfiguration","Literal","httpMethod","exports","Controller","requireFeatures","features","app","middleware","hasNotEnabled","find","castArray","feature","enabled","hasMethod","obj","name","desc","Object","getOwnPropertyDescriptor","has","value","proto","getPrototypeOf","prototype","defaultBackendPath","process","env","NODE_RT","BACKEND_SRC_PATH","BACKEND_PATH"],"mappings":"AAAA;;;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAQC,OAAO,CAAC,YAAD,CAArB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAA2BD,OAAO,CAAC,aAAD,CAAxC;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,cAAD,CAA1B;;AAEAI,OAAO,CAACC,UAAR,GAAqBL,OAAO,CAAC,cAAD,CAA5B;;AAEAI,OAAO,CAACE,eAAR,GAA0B,UAAUC,QAAV,EAAoBC,GAApB,EAAyBC,UAAzB,EAAqC;AAC3D,MAAIC,aAAa,GAAGX,CAAC,CAACY,IAAF,CAAOZ,CAAC,CAACa,SAAF,CAAYL,QAAZ,CAAP,EAA8BM,OAAO,IAAI,CAACL,GAAG,CAACM,OAAJ,CAAYD,OAAZ,CAA1C,CAApB;;AAEA,MAAIH,aAAJ,EAAmB;AACf,UAAM,IAAIT,oBAAJ,CACD,eAAcQ,UAAW,eAAcC,aAAc,0BADpD,EAEFF,GAFE,EAGD,eAAcC,UAAW,EAHxB,CAAN;AAKH;AACJ,CAVD;;AAeAL,OAAO,CAACD,UAAR,GAAqBA,UAArB;;AAEAC,OAAO,CAACW,SAAR,GAAoB,SAASA,SAAT,CAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAC9C,QAAMC,IAAI,GAAGC,MAAM,CAACC,wBAAP,CAAgCJ,GAAhC,EAAqCC,IAArC,CAAb;AACA,MAAII,GAAG,GAAG,CAAC,CAACH,IAAF,IAAU,OAAOA,IAAI,CAACI,KAAZ,KAAsB,UAA1C;AACA,MAAID,GAAJ,EAAS,OAAO,IAAP;AAET,MAAIE,KAAK,GAAGJ,MAAM,CAACK,cAAP,CAAsBR,GAAtB,CAAZ;AACA,MAAIO,KAAK,KAAKJ,MAAM,CAACM,SAArB,EAAgC,OAAOJ,GAAP;AAEhC,SAAON,SAAS,CAACQ,KAAD,EAAQN,IAAR,CAAhB;AACH,CATD;;AAcAb,OAAO,CAACsB,kBAAR,GAA8BC,OAAO,CAACC,GAAR,CAAYC,OAAZ,IAAuBF,OAAO,CAACC,GAAR,CAAYC,OAAZ,KAAwB,OAAhD,GAA2D3B,OAAO,CAAC4B,gBAAnE,GAAsF5B,OAAO,CAAC6B,YAA3H","sourcesContent":["\"use strict\";\n\nconst { _ } = require('@genx/july');\nconst { InvalidConfiguration } = require('@genx/error');\nconst Literal = require('../enum/Literal');\nconst httpMethod = require('./httpMethod');\n\nexports.Controller = require('./Controller');\n\nexports.requireFeatures = function (features, app, middleware) {\n    let hasNotEnabled = _.find(_.castArray(features), feature => !app.enabled(feature));\n\n    if (hasNotEnabled) {\n        throw new InvalidConfiguration(\n            `Middleware \"${middleware}\" requires \"${hasNotEnabled}\" feature to be enabled.`,\n            app,\n            `middlewares.${middleware}`\n        );\n    }\n};\n\n/**\n * Http method decorator for module controller\n */\nexports.httpMethod = httpMethod;\n\nexports.hasMethod = function hasMethod(obj, name) {\n    const desc = Object.getOwnPropertyDescriptor(obj, name);    \n    let has = !!desc && typeof desc.value === 'function';\n    if (has) return true;\n\n    let proto = Object.getPrototypeOf(obj);\n    if (proto === Object.prototype) return has;\n\n    return hasMethod(proto, name);\n};\n\n/**\n * when running with [NODE_RT=babel], directly use source files\n */\nexports.defaultBackendPath = (process.env.NODE_RT && process.env.NODE_RT === 'babel') ? Literal.BACKEND_SRC_PATH : Literal.BACKEND_PATH;"],"file":"Helpers.js"}