{"version":3,"file":"templatedError.js","names":["path","require","Literal","InvalidConfiguration","koaError","module","exports","options","app","template","engine","resolve","backendPath","VIEWS_PATH"],"sources":["../../src/middlewares/templatedError.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Error response middleware with template engines\n * @module Middleware_TemplatedError\n */\n\nconst path = require('path');\nconst Literal = require('../enum/Literal');\nconst { InvalidConfiguration } = require('@genx/error');\n\n/**\n * @function\n * @param {Object} options - Template options\n * @property {string} options.template - Path to template written with your template engine\n * @property {string} options.engine - Path to template written with your template engine\n * @property {bool} options.cache - Path to template written with your template engine, default: NODE_ENV != 'development'\n * @property {string} [options.env='development'] - Path to template written with your template engine\n * @property {Array.<string>} options.accepts - Mimetypes passed to ctx.accepts, default: [ 'html', 'text', 'json' ]\n **/\nconst koaError = require('koa-error');\n\nmodule.exports = (options, app) => {\n    if (!options.template) {        \n        if (options.engine && options.engine !== 'swig') {\n            throw new InvalidConfiguration(\n                'Missing template option.',\n                app,\n                'middlewares.templatedError.template'\n            );        \n        }\n\n        options.template = 'defaultError.swig';\n    }\n\n    options.template = path.resolve(app.backendPath, Literal.VIEWS_PATH, options.template); \n\n    if (!options.engine) {\n        options.engine = 'swig';\n    }\n\n    return koaError(options);\n} "],"mappings":"AAAA;;;;AAOA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAM;EAAEE;AAAF,IAA2BF,OAAO,CAAC,aAAD,CAAxC;;AAWA,MAAMG,QAAQ,GAAGH,OAAO,CAAC,WAAD,CAAxB;;AAEAI,MAAM,CAACC,OAAP,GAAiB,CAACC,OAAD,EAAUC,GAAV,KAAkB;EAC/B,IAAI,CAACD,OAAO,CAACE,QAAb,EAAuB;IACnB,IAAIF,OAAO,CAACG,MAAR,IAAkBH,OAAO,CAACG,MAAR,KAAmB,MAAzC,EAAiD;MAC7C,MAAM,IAAIP,oBAAJ,CACF,0BADE,EAEFK,GAFE,EAGF,qCAHE,CAAN;IAKH;;IAEDD,OAAO,CAACE,QAAR,GAAmB,mBAAnB;EACH;;EAEDF,OAAO,CAACE,QAAR,GAAmBT,IAAI,CAACW,OAAL,CAAaH,GAAG,CAACI,WAAjB,EAA8BV,OAAO,CAACW,UAAtC,EAAkDN,OAAO,CAACE,QAA1D,CAAnB;;EAEA,IAAI,CAACF,OAAO,CAACG,MAAb,EAAqB;IACjBH,OAAO,CAACG,MAAR,GAAiB,MAAjB;EACH;;EAED,OAAON,QAAQ,CAACG,OAAD,CAAf;AACH,CApBD"}