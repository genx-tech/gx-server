{"version":3,"sources":["../../src/utils/middleware.js"],"names":["UnexpectedState","require","middleware","middlewares","target","name","descriptor","targetFunction","isHof","arguments","length","value","enumerable","__metaMiddlewares","module","exports"],"mappings":";;;;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAsBC,OAAO,CAAC,aAAD,CAAnC;;AAEA,SAASC,UAAT,CAAoB,GAAGC,WAAvB,EAAoC;AAChC,SAAO,UAAUC,MAAV,EAAkBC,IAAlB,EAAwBC,UAAxB,EAAoC;AACvC,QAAIC,cAAJ;AAAA,QACIC,KAAK,GAAG,KADZ;;AAGA,QAAIC,SAAS,CAACC,MAAV,KAAqB,CAArB,IAA0B,OAAON,MAAP,KAAkB,UAAhD,EAA4D;AACxDG,MAAAA,cAAc,GAAGH,MAAjB;AACAI,MAAAA,KAAK,GAAG,IAAR;AACH,KAHD,MAGO,IAAIF,UAAU,IAAIA,UAAU,CAACK,KAA7B,EAAoC;AACvCJ,MAAAA,cAAc,GAAGD,UAAU,CAACK,KAA5B;AACAL,MAAAA,UAAU,CAACM,UAAX,GAAwB,IAAxB;AACH,KAHM,MAGA;AACH,YAAM,IAAIZ,eAAJ,CAAoB,wCAApB,CAAN;AACH;;AAED,QAAIG,WAAW,CAACO,MAAZ,GAAqB,CAAzB,EAA4B;AACxBH,MAAAA,cAAc,CAACM,iBAAf,GAAmCV,WAAnC;AACH;;AAED,WAAOK,KAAK,GAAGD,cAAH,GAAoBD,UAAhC;AACH,GAnBD;AAoBH;;AAEDQ,MAAM,CAACC,OAAP,GAAiBb,UAAjB","sourcesContent":["const { UnexpectedState } = require(\"@genx/error\");\n\nfunction middleware(...middlewares) {\n    return function (target, name, descriptor) {\n        let targetFunction,\n            isHof = false;\n\n        if (arguments.length === 1 && typeof target === \"function\") {\n            targetFunction = target;\n            isHof = true;\n        } else if (descriptor && descriptor.value) {\n            targetFunction = descriptor.value;\n            descriptor.enumerable = true;\n        } else {\n            throw new UnexpectedState(\"Invalid usage of middleware decorator.\");\n        }\n\n        if (middlewares.length > 0) {\n            targetFunction.__metaMiddlewares = middlewares;\n        }\n\n        return isHof ? targetFunction : descriptor;\n    };\n}\n\nmodule.exports = middleware;\n"],"file":"middleware.js"}