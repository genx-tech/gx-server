{"version":3,"file":"middleware.js","names":["UnexpectedState","require","middleware","middlewares","target","name","descriptor","targetFunction","isHof","arguments","length","value","enumerable","__metaMiddlewares","module","exports"],"sources":["../../src/utils/middleware.js"],"sourcesContent":["const { UnexpectedState } = require(\"@genx/error\");\n\nfunction middleware(...middlewares) {\n    return function (target, name, descriptor) {\n        let targetFunction,\n            isHof = false;\n\n        if (arguments.length === 1 && typeof target === \"function\") {\n            targetFunction = target;\n            isHof = true;\n        } else if (descriptor && descriptor.value) {\n            targetFunction = descriptor.value;\n            descriptor.enumerable = true;\n        } else {\n            throw new UnexpectedState(\"Invalid usage of middleware decorator.\");\n        }\n\n        if (middlewares.length > 0) {\n            targetFunction.__metaMiddlewares = middlewares;\n        }\n\n        return isHof ? targetFunction : descriptor;\n    };\n}\n\nmodule.exports = middleware;\n"],"mappings":";;;AAAA,MAAM;EAAEA;AAAgB,CAAC,GAAGC,OAAO,CAAC,aAAa,CAAC;AAElD,SAASC,UAAUA,CAAC,GAAGC,WAAW,EAAE;EAChC,OAAO,UAAUC,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAE;IACvC,IAAIC,cAAc;MACdC,KAAK,GAAG,KAAK;IAEjB,IAAIC,SAAS,CAACC,MAAM,KAAK,CAAC,IAAI,OAAON,MAAM,KAAK,UAAU,EAAE;MACxDG,cAAc,GAAGH,MAAM;MACvBI,KAAK,GAAG,IAAI;IAChB,CAAC,MAAM,IAAIF,UAAU,IAAIA,UAAU,CAACK,KAAK,EAAE;MACvCJ,cAAc,GAAGD,UAAU,CAACK,KAAK;MACjCL,UAAU,CAACM,UAAU,GAAG,IAAI;IAChC,CAAC,MAAM;MACH,MAAM,IAAIZ,eAAe,CAAC,wCAAwC,CAAC;IACvE;IAEA,IAAIG,WAAW,CAACO,MAAM,GAAG,CAAC,EAAE;MACxBH,cAAc,CAACM,iBAAiB,GAAGV,WAAW;IAClD;IAEA,OAAOK,KAAK,GAAGD,cAAc,GAAGD,UAAU;EAC9C,CAAC;AACL;AAEAQ,MAAM,CAACC,OAAO,GAAGb,UAAU"}